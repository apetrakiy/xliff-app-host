(this["webpackJsonpxliff-app"]=this["webpackJsonpxliff-app"]||[]).push([[0],{145:function(e,t,n){},431:function(e,t){},433:function(e,t){},451:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(0),c=n(16),i=n(17),s=(n(142),n(143),n(144),n(145),n(9)),o=n.n(s),u=n(12),l=n(27),d=n(19),p=n(134),f=n(133),b=n(8),h=n(28),j=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).onConfigure=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.sdk.app.getCurrentState();case 2:return t=e.sent,e.abrupt("return",{parameters:r.state.parameters,targetState:t});case 4:case"end":return e.stop()}}),e)}))),r.state={parameters:{}},e.sdk.app.onConfigure((function(){return r.onConfigure()})),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sdk.app.getParameters();case 2:t=e.sent,this.setState(t?{parameters:t}:this.state,(function(){n.props.sdk.app.setReady()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsx)(b.Workbench,{className:Object(h.a)({margin:"80px"}),children:Object(r.jsxs)(b.Form,{children:[Object(r.jsx)(b.Heading,{children:"App Config"}),Object(r.jsx)(b.Paragraph,{children:"Welcome to your contentful app. This is your config page."})]})})}}]),n}(a.Component),x=function(e){return Object(r.jsx)(b.Paragraph,{children:"Hello Entry Editor Component"})},O=function(e){return Object(r.jsx)(b.Paragraph,{children:"Hello Page Component"})},y=function(e){var t=e.sdk,n=t.locales;Object(a.useEffect)((function(){return t.window.startAutoResizer(),function(){t.window.stopAutoResizer()}}),[t.window]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(b.Button,{type:"button",onClick:function(){return function(){var e=t.entry.fields[t.contentType.displayField].getValue(n.default);t.dialogs.openCurrentApp({allowHeightOverflow:!0,position:"center",shouldCloseOnOverlayClick:!0,shouldCloseOnEscapePress:!0,title:"XLIFF import/export",parameters:{entryId:t.entry.getSys().id,entryTitle:e,contentTypeId:t.contentType.sys.id},width:"large",minHeight:350})}()},children:"XLIFF import/export"})})},v=function(e){return Object(r.jsx)(b.Paragraph,{children:"Hello Entry Field Component"})},m=n(13),g=n(38),k={modalContainer:Object(h.a)({height:"360px"}),modalContent:Object(h.a)({}),headerUnderline:Object(h.a)({borderBottom:"1px solid rgb(195, 207, 213)"})};var E=n(20),w=n(131),C=n(132),T=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.space=void 0,this.locales=void 0,this.entryMetadatas=[],this.initPromise=void 0,this.ensureInitialized=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.initPromise;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getEntry=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ensureInitialized();case 2:return e.next=4,r.space.getEntry(t);case 4:return a=e.sent,c=a.fields,i=r.entryMetadatas.find((function(e){return e.contentType.sys.id===a.sys.contentType.sys.id})),s=null===(n=i.contentType.sys.space)||void 0===n?void 0:n.sys.id,e.abrupt("return",{id:t,spaceId:s,fields:c,metadata:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.space=t,this.locales=n,this.initPromise=this.initializeEntryMetadatas()}return Object(d.a)(e,[{key:"initializeEntryMetadatas",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,a,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.space.getContentTypes();case 2:t=e.sent.items,n=Object(E.a)(t);try{for(a=function(){var e=r.value,t=function(e){var t;return"Link"===e.type||"Array"===e.type&&"Link"===(null===(t=e.items)||void 0===t?void 0:t.type)},n=e.fields.filter((function(e){return!e.disabled&&e.localized})),a={contentType:e,linkFields:n.filter((function(e){return function(e){var n;return t(e)&&("Entry"===e.linkType||"Entry"===(null===(n=e.items)||void 0===n?void 0:n.linkType))}(e)})),localizableFields:n.filter((function(e){return!t(e)}))};c.entryMetadatas.push(a)},n.s();!(r=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}console.log("Metadatada initialized!");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"Create",value:function(t,n){return new e(t,n)}}]),e}(),F=n(423),I=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.contentful=void 0,this.exportToFile=function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,c){var i,s,u,l,d,p,f,b,h,j,x,O,y,v,m,g,k,T,I,L,N,A;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e,t){if(!e[t])return"";var n=e[t];return"object"===typeof n?Object(w.documentToHtmlString)(n):n},e.next=3,r.contentful.getEntry(t);case 3:if(s=e.sent,!c){e.next=10;break}return e.next=7,r.getAllEntries(s,n,a);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[s];case 11:u=e.t0,l={resources:{},sourceLanguage:n,targetLanguage:a},d=Object(E.a)(u),e.prev=14,d.s();case 16:if((p=d.n()).done){e.next=44;break}f=p.value,b={},h=Object(E.a)(f.metadata.localizableFields),e.prev=20,h.s();case 22:if((j=h.n()).done){e.next=33;break}if(x=j.value,O=x.id,y=x.type,v=f.fields,"Boolean"!==y&&v[O]){e.next=27;break}return e.abrupt("continue",31);case 27:if(""!==(m={source:i(v[O],n),target:i(v[O],a)}).source){e.next=30;break}return e.abrupt("continue",31);case 30:b[O]=m;case 31:e.next=22;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(20),h.e(e.t1);case 38:return e.prev=38,h.f(),e.finish(38);case 41:Object.keys(b).length&&(g=f.spaceId,k="".concat(g,":").concat(f.id),l.resources[k]=b);case 42:e.next=16;break;case 44:e.next=49;break;case 46:e.prev=46,e.t2=e.catch(14),d.e(e.t2);case 49:return e.prev=49,d.f(),e.finish(49);case 52:if(!Object.keys(l.resources).length){e.next=61;break}return e.next=55,F(l);case 55:T=e.sent,I=new Blob([T],{type:"text/plain;charset=utf-8"}),L=s.fields[s.metadata.contentType.displayField][n],N=s.spaceId,A="".concat(a,"_").concat(L,"_").concat(s.id,"_").concat(N,"_").concat(n,".xlf"),Object(C.saveAs)(I,A);case 61:case"end":return e.stop()}}),e,null,[[14,46,49,52],[20,35,38,41]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.contentful=T.Create(t,n)}return Object(d.a)(e,[{key:"getAllEntries",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,s,u,l,d,p,f,b,h,j,x,O,y,v,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(e){a.findIndex((function(t){return t.id===e.id}))<0&&a.push(e)},i=[],(a=[]).push(t);case 4:if(!a.length){e.next=69;break}if(s=a[0],console.log("Entry id: "+s.id+", Type: "+s.metadata.contentType.sys.id+", Fields: "+JSON.stringify(s.fields)),!s.metadata.linkFields.length){e.next=65;break}u=Object(E.a)(s.metadata.linkFields),e.prev=9,u.s();case 11:if((l=u.n()).done){e.next=57;break}if(d=l.value,console.log("Link id: "+d.id),p=s.fields[d.id]){e.next=17;break}return e.abrupt("continue",55);case 17:if(e.prev=17,f=p[n],b=p[r],console.log("".concat(n,": ").concat(JSON.stringify(f),", ").concat(r,": ").concat(JSON.stringify(b))),"Array"!==d.type){e.next=44;break}h=null!==b&&void 0!==b?b:f,j=Object(E.a)(h),e.prev=24,j.s();case 26:if((x=j.n()).done){e.next=34;break}return O=x.value,e.next=30,this.contentful.getEntry(O.sys.id);case 30:y=e.sent,c(y);case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),j.e(e.t0);case 39:return e.prev=39,j.f(),e.finish(39);case 42:e.next=49;break;case 44:return v=null!==b&&void 0!==b?b:f,e.next=47,this.contentful.getEntry(v.sys.id);case 47:m=e.sent,c(m);case 49:e.next=55;break;case 51:throw e.prev=51,e.t1=e.catch(17),console.error(e.t1),e.t1;case 55:e.next=11;break;case 57:e.next=62;break;case 59:e.prev=59,e.t2=e.catch(9),u.e(e.t2);case 62:return e.prev=62,u.f(),e.finish(62);case 65:s.metadata.localizableFields.length&&i.push(s),a.shift(),e.next=4;break;case 69:return e.abrupt("return",i);case 70:case"end":return e.stop()}}),e,this,[[9,59,62,65],[17,51],[24,36,39,42]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),Object(d.a)(e,null,[{key:"Create",value:function(t,n){return new e(t,n)}}]),e}(),L=function(e){var t=e.sdk,n=t.locales,c=n.default,i=e.sdk.parameters.invocation,s=n.available.filter((function(e){return e!==c})).map((function(e){return{code:e,name:n.names[e]}})).sort((function(e,t){return e.name>t.name?1:-1})),l=I.Create(t.space,t.locales),d=function(e,t){var n=Object(a.useState)((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),r=Object(g.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(c))}),[t,c]),[c,i]}({targetLocale:s[0].code,includeLinkedEntries:!0,isBusy:!1,busyMessage:""},"export-xliff-dialog"),p=Object(g.a)(d,2),f=p[0],h=p[1],j=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(Object(m.a)(Object(m.a)({},f),{},{isBusy:!0,busyMessage:"Exporting entries..."})),e.prev=1,e.next=4,l.exportToFile(i.entryId,n.default,f.targetLocale,f.includeLinkedEntries);case 4:return e.prev=4,h(Object(m.a)(Object(m.a)({},f),{},{isBusy:!1,busyMessage:""})),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(b.Modal.Content,{children:Object(r.jsx)("div",{className:k.modalContent,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(b.Typography,{children:Object(r.jsx)(b.Heading,{className:k.headerUnderline,children:"Export"})}),Object(r.jsxs)(b.Flex,{justifyContent:"space-between",alignItems:"cener",marginBottom:"spacingM",children:[Object(r.jsx)(b.Flex,{children:Object(r.jsxs)(b.Paragraph,{children:[Object(r.jsx)("b",{children:"Source locale:"})," ",c]})}),Object(r.jsx)(b.Flex,{children:Object(r.jsxs)(b.FieldGroup,{children:[Object(r.jsx)(b.FormLabel,{htmlFor:"workspaceId",required:!0,children:"Target locale"}),Object(r.jsx)(b.Select,{isDisabled:f.isBusy,width:"medium",value:"".concat(f.targetLocale),onChange:function(e){return h(Object(m.a)(Object(m.a)({},f),{},{targetLocale:e.currentTarget.value}))},children:s.map((function(e){return Object(r.jsx)(b.Option,{value:e.code,children:e.name},e.code)}))}),Object(r.jsx)(b.CheckboxField,{onChange:function(){return e=f.includeLinkedEntries,void h(Object(m.a)(Object(m.a)({},f),{},{includeLinkedEntries:!e}));var e},labelText:"include linked entries",id:"inludeLinkedEntries",name:"inludeLinkedEntries",checked:f.includeLinkedEntries,value:"{state.includeLinkedEntries}","data-test-id":"ct-item-".concat(f.includeLinkedEntries)},"{state.includeLinkedEntries}")]})}),Object(r.jsx)(b.Flex,{children:Object(r.jsx)(b.Button,{onClick:function(){return j()},buttonType:"positive",children:"Export"})})]}),f.isBusy&&Object(r.jsxs)("div",{children:[f.busyMessage," ",Object(r.jsx)(b.Spinner,{})]}),Object(r.jsxs)(b.Typography,{children:[Object(r.jsx)(b.Heading,{className:k.headerUnderline,children:"Import"}),Object(r.jsx)(b.Paragraph,{children:"Import..."})]}),Object(r.jsx)(b.TextInput,{name:"example",type:"text",value:"Forma 36",className:"f36-margin-bottom--m"})]})})})})};Object(i.init)((function(e){var t=document.getElementById("root");[{location:i.locations.LOCATION_APP_CONFIG,component:Object(r.jsx)(j,{sdk:e})},{location:i.locations.LOCATION_ENTRY_FIELD,component:Object(r.jsx)(v,{sdk:e})},{location:i.locations.LOCATION_ENTRY_EDITOR,component:Object(r.jsx)(x,{sdk:e})},{location:i.locations.LOCATION_DIALOG,component:Object(r.jsx)(L,{sdk:e})},{location:i.locations.LOCATION_ENTRY_SIDEBAR,component:Object(r.jsx)(y,{sdk:e})},{location:i.locations.LOCATION_PAGE,component:Object(r.jsx)(O,{sdk:e})}].forEach((function(n){e.location.is(n.location)&&Object(c.render)(n.component,t)}))}))}},[[451,1,2]]]);
//# sourceMappingURL=main.12285e23.chunk.js.map